<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seleção de Metodologia de Rating</title>
  <meta name="description" content="Menu para acessar os simuladores simplificados de Moody's, Fitch e S&P."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    body{font-family:'Inter',sans-serif;background:#FFFFFF}
    .title-color{color:#1E428B}
    .green-title-color{color:#009933}
    .btn-primary{background:#1E428B;color:#FFFFFF;transition:background-color .3s ease, transform .2s ease}
    .btn-primary:hover{background:#16336a;transform:translateY(-2px)}
    .btn-secondary{background:#FFFFFF;color:#1E428B;border-color:#1E428B;transition:background-color .3s ease, color .3s ease, transform .2s ease}
    .btn-secondary:hover{background:#f0f5ff;transform:translateY(-2px)}
    
    /* Botão do chat personalizado */
    .chat-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: #1E428B;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(30, 66, 139, 0.3);
      transition: all 0.3s ease;
      z-index: 1000;
      border: none;
    }
    
    .chat-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(30, 66, 139, 0.4);
    }
    
    .chat-button svg {
      width: 28px;
      height: 28px;
      color: white;
    }
  </style>
</head>
<body class="bg-white flex items-center justify-center min-h-screen p-4">
  <main class="w-full max-w-lg bg-gray-50 p-8 sm:p-12 rounded-2xl shadow-lg border border-gray-200 text-center">
    <header class="mb-10">
      <h1 class="text-4xl font-bold green-title-color">Selecione a metodologia</h1>
      <p class="text-gray-600 mt-3">Escolha uma agência para iniciar a simulação de rating do projeto.</p>
    </header>

    <section class="space-y-5 flex flex-col">
      <!-- S&P -->
      <a href="sp.html"
         class="btn-primary w-full py-4 px-6 text-lg font-bold rounded-xl shadow-md focus:outline-none focus:ring-4 focus:ring-blue-300 block text-center"
         aria-label="Abrir simulador S&P Ratings">
         S&amp;P Ratings
      </a>

      <!-- Moody's -->
      <a href="moody.html"
         class="btn-secondary w-full py-4 px-6 text-lg font-bold rounded-xl shadow-md border-2 focus:outline-none focus:ring-4 focus:ring-blue-300 block text-center"
         aria-label="Abrir simulador Moody's">
         Moody's
      </a>

      <!-- Fitch -->
      <a href="fitch.html"
         class="btn-secondary w-full py-4 px-6 text-lg font-bold rounded-xl shadow-md border-2 focus:outline-none focus:ring-4 focus:ring-blue-300 block text-center"
         aria-label="Abrir simulador Fitch Ratings">
         Fitch
      </a>
    </section>

    <footer class="mt-12">
      <p class="text-xs text-gray-500">Cada simulador é uma interpretação simplificada da metodologia pública de sua respectiva agência.</p>
    </footer>
  </main>

  <!-- Botão do Chat Personalizado -->
  <button class="chat-button" onclick="openChatPage()" title="Abrir Chat de Metodologia">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
    </svg>
  </button>

  <script>
    function openChatPage() {
      // Abre uma nova janela/aba com o chat
      const chatWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes,resizable=yes');
      
      if (chatWindow) {
        // Escreve o HTML da página do chat
        chatWindow.document.write('<!DOCTYPE html>');
        chatWindow.document.write('<html lang="pt-BR">');
        chatWindow.document.write('<head>');
        chatWindow.document.write('<meta charset="UTF-8"/>');
        chatWindow.document.write('<meta name="viewport" content="width=device-width, initial-scale=1.0"/>');
        chatWindow.document.write('<title>Chat - Metodologia de Risco de Crédito</title>');
        chatWindow.document.write('<style>');
        chatWindow.document.write('body { margin: 0; padding: 0; font-family: Inter, sans-serif; background: #f8fafc; height: 100vh; overflow: hidden; }');
        chatWindow.document.write('.header { background: #009933; color: white; padding: 16px 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: relative; }');
        chatWindow.document.write('.header h1 { margin: 0; font-size: 20px; font-weight: 600; }');
        chatWindow.document.write('.close-btn { position: absolute; top: 50%; right: 20px; transform: translateY(-50%); background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 5px; border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }');
        chatWindow.document.write('.close-btn:hover { background: rgba(255,255,255,0.2); }');
        chatWindow.document.write('.chat-container { height: calc(100vh - 68px); }');
        chatWindow.document.write('flowise-fullchatbot { width: 100%; height: 100%; display: block; }');
        chatWindow.document.write('</style>');
        chatWindow.document.write('</head>');
        chatWindow.document.write('<body>');
        chatWindow.document.write('<div class="header">');
        chatWindow.document.write('<h1>Chatbot Metodologia de Risco de Crédito</h1>');
        chatWindow.document.write('<button class="close-btn" onclick="window.close()" title="Fechar">×</button>');
        chatWindow.document.write('</div>');
        chatWindow.document.write('<div class="chat-container">');
        chatWindow.document.write('<flowise-fullchatbot></flowise-fullchatbot>');
        chatWindow.document.write('</div>');
        chatWindow.document.write('<script type="module">');
        chatWindow.document.write('import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js";');
        chatWindow.document.write('Chatbot.initFull({');
        chatWindow.document.write('chatflowid: "61404541-6f1e-4364-8ef8-3647f4573ea6",');
        chatWindow.document.write('apiHost: "https://cloud.flowiseai.com",');
        chatWindow.document.write('theme: {');
        chatWindow.document.write('chatWindow: {');
        chatWindow.document.write('backgroundColor: "#FFFFFF",');
        chatWindow.document.write('textColor: "#1E428B",');
        chatWindow.document.write('poweredByTextColor: "#999999"');
        chatWindow.document.write('}');
        chatWindow.document.write('}');
        chatWindow.document.write('})');
        chatWindow.document.write('<\/script>');
        chatWindow.document.write('</body>');
        chatWindow.document.write('</html>');
        chatWindow.document.close();
        chatWindow.focus();
      } else {
        // Fallback se pop-up for bloqueado
        alert('Por favor, permita pop-ups para abrir o chat ou use Ctrl+Click no botão do chat.');
      }
    }
  </script>
</body>
</html>
